=begin
= RuBBS 1.0.7

== RuBBSとは
RuBBSは、Rubyで書かれた掲示板CGIスクリプトです。以下のような特徴があります。

* 複数の掲示板を管理できます。
* 設定の変更は、すべて管理用のCGIを通じて行なえます。
* 最新記事の参照は静的に生成されたHTMLを使うため、非常に負荷が低いです。
* 投稿の内容を、任意の複数のメールアドレスに配信できます。
* Cookieを使っていくつかの情報を保存します。
* eRubyを使った柔軟なカスタマイズが可能です。
* 記事中のURLは自動的にリンクに変換されます。一方、HTMLタグは使用できないので安全です。

== インストール
すでに0.3.2までのRuBBSを使っていた場合は、このあとの『移行について』も読んでください。

まず、RuBBSをインストールするディレクトリを作成します。
CGIスクリプトを入れるディレクトリと、静的HTMLファイルを格納するディレクトリの2つが必要です。仮に以下のように作成したとします。

* CGIスクリプト用: /var/www/cgi-bin/rubbs
* HTML用: /var/www/html/rubbs

それぞれに、WWWサーバの権限で書き込みができるようにしておく必要があります
(ownerを変更する、chmod o+wするなど)。

続いてCGIスクリプトのインストールです。

配布されたファイルはすべて、CGIスクリプト用ディレクトリにコピーします。
以下のようになります。

  /var/www/cgi-bin/rubbs --- rubbs.rb
      +- rubbs.rb
      +- admin
      +- admin-init
      +- lock.rb
      +- erb/
      |   +- erb*.rb
      +- conf/
      |   +- *.conf
      |   +- *.rhtml
      |   +- *.rtxt
		+- misc/
		|   +- squeeze.*
		|   +- postrubbs.*
      +- README.*
      +- CHANGES
      +- COPYING

環境によってはこのままでも動きますが、
以下のような制限がある場合には少しスクリプトを書き換える必要があります。

(1) CGIのサフィックス(拡張子)が特定のもの(.cgiなど)でなければならない
    adminとadmin-initのサフィックスを適切なものに変更してください。
(2) Rubyのインストール先が特殊
    WWWサーバの検索パスに含まれていない場合などには、adminとadmin-initの最初の行を以下のように書き換える必要があります。

        #!/usr/bin/env ruby
                ↓
        #!/foo/bar/bin/ruby
        (/foo/bar/にRubyがインストールされている場合)

== 実行方法
Administration Tool(adminスクリプト)に、CGIとしてブラウザからアクセスします。
インストールがうまくいっていないとエラーが出るかも知れませんが、
adminからのメッセージの場合はそれに従って設定を変更すると、
管理用のパスワードや各種初期設定をする画面になるはずです。
ここまでは英語ですが、その後は日本語の画面になるので、我慢して下さい(笑)。
日本語にならない場合、使っているブラウザの設定が英語優先になっている可能性があります。
Accept-Languageで「ja」を優先するように設定してください。
もちろん、英語のままでも日本語対応の掲示板を作成できます。

初期設定が済んだら、adminは管理者用のパスワードの入力を促す画面になります。
今後の管理はこの画面からスタートすることになります。

あとは画面の指示に従って操作してください。

== 旧バージョンからの移行について
0.9.1以降のRuBBSは、それ以前に使われていたCSSと互換性が一部失われています。添付のconf/rubbs.cssを参考にして書き直してください。

0.5.0以降のRuBBSは、0.3.2以前のものとは設定ファイルやデータベースファイルの互換性がありません。
このため、以下の作業が必要です。

* CGIスクリプトのインストール先は別のディレクトリにした方が良いでしょう。
ただしHTMLファイルの格納先は同じの方が良いでしょう。
* 旧掲示板の内容は移行することができます。Administration Tool(adminスクリプト)で移行してください。
このメニューは、ブラウザのAccept-Languageが「ja」の時のみ現れます(旧RuBBSを英語圏で使っている人はいないため)。もしメニューが出なかった場合は、ブラウザの設定を見直してください。
* 設定は引き継ぐことができません。新たに掲示板を作り直してください。
* 旧版で変更可能だった色の設定はなくなりました。
見栄えはすべてCSSに出してありますので、自由に変更してください。
標準のCSSはconf/rubbs.cssにあります。このファイルは最初のadmin実行後、HTMLパスにコピーされます。

== ライセンス
GPL 2.0に準拠します。著作権は「ただただし」(sho@spc.gr.jp)が保有しています。
サポートはhttp://www.spc.gr.jp/bbs/RuBBS.htmlで行なっています。

ただし、付属のerb(ディレクトリerb配下のすべてのファイル)は、咳さんの作品です。
<http://www2a.biglobe.ne.jp/~seki/ruby/>を参照してください。
=end

